(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f7a2c7c"],{"3e43":function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view",attrs:{id:"d1"}},["0"!==t.$route.params.shno?a("div",{staticClass:"deliverytop"},[t._v("\n    送货单\n  ")]):t._e(),a("van-sticky",{attrs:{"offset-top":"0"}},["0"===t.$route.params.shno?a("van-search",{attrs:{"show-action":"",placeholder:"请输入SH单号"},on:{search:t.onSearch},scopedSlots:t._u([{key:"action",fn:function(){return[a("div",{on:{click:t.onSearch}},[t._v("搜索")])]},proxy:!0}],null,!1,3446203101),model:{value:t.order,callback:function(e){t.order=e},expression:"order"}}):t._e()],1),a("van-list",{attrs:{offset:"80",finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.goodList,(function(t,e){return a("DeliveryCard",{key:e,staticClass:"DeliveryCard",attrs:{goodList:t}})})),1)],1)},s=[],r=(a("2994"),a("2bdd")),o=(a("0cc8"),a("3104")),c=(a("e7e5"),a("d399")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comp"},[a("div",{staticClass:"header"},[a("div",{staticClass:"left"},[t._v(t._s(t.goodList.delivery_note))])]),a("div",{staticClass:"center"},t._l(t.goodList.products,(function(e,n){return a("div",{key:n,staticClass:"gooditem"},[t.show?a("van-checkbox",{staticClass:"itemCheckbox",staticStyle:{"font-size":"14px"},attrs:{value:t.checkedList[n],"icon-size":"18px"},on:{click:function(e){return t.changeCheck(n)}}}):t._e(),a("div",{staticClass:"imgbox"},[a("img",{attrs:{src:e.abbfileName,alt:""}})]),a("div",{staticClass:"infobox"},[a("div",{},[t._v(t._s(e.matCode))]),a("div",{staticClass:"name"},[t._v(t._s(e.matName))])]),a("div",{staticClass:"numbbox"},[a("span",{staticClass:"numb"},[t._v("下单："+t._s(e.poQut))]),a("span",{staticClass:"numb"},[t._v("送货："+t._s(e.sjShQut))]),a("span",{staticClass:"numb"},[t._v("已收："+t._s(e.ysOut))]),a("van-stepper",{staticClass:"stepper",attrs:{"decimal-length":3,theme:"round",step:"0.001","button-size":"22",min:"0.001",max:Math.round(1e3*(e.sjShQut-e.ysOut+Number.EPSILON))/1e3,"disable-plus":e.qcShQut>=Math.round(1e3*(e.sjShQut-e.ysOut+Number.EPSILON))/1e3},model:{value:e.qcShQut,callback:function(a){t.$set(e,"qcShQut",a)},expression:"i.qcShQut"}})],1)],1)})),0),a("div",{staticClass:"footer"},[a("van-checkbox",{staticStyle:{"font-size":"14px"},attrs:{"icon-size":"18px"},on:{click:function(e){return t.changechecked(t.checked)}},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")]),a("div",{staticClass:"btnBox"},[a("span",{staticClass:"btnbox1",on:{click:t.confirmReceipt}},[t._v("确认收货")])])],1),a("van-uploader",{attrs:{accept:"image/*,.pdf,.xls,.xlsx",multiple:"","after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1)},l=[],d=(a("e930"),a("8f80")),f=(a("3c32"),a("417e")),h=(a("f06a"),a("20fb")),p=(a("afd4"),a("ca19")),m=(a("5246"),a("6b41")),v=a("b813"),b=a("769a"),g=a("f9ae");a("b006");function _(t){return k(t)||P(t)||L(t)||y()}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(t,e){if(t){if("string"===typeof t)return A(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(t,e):void 0}}function P(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function k(t){if(Array.isArray(t))return A(t)}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var S,O={name:"intervalTimeSelect",components:(n={},C(n,m["a"].name,m["a"]),C(n,p["a"].name,p["a"]),C(n,h["a"].name,h["a"]),C(n,f["a"].name,f["a"]),C(n,d["a"].name,d["a"]),n),props:{goodList:{type:Object,default:function(){return{}}}},data:function(){return{value:1,checked:!1,checkedList:{},show:!0,fileList:[],FfileList:[]}},beforeUpdate:function(){},computed:{},created:function(){},mounted:function(){},methods:{confirmReceipt:function(){var t=this,e=[],a=Object.keys(this.checkedList);a instanceof Array&&a.length>0?this.fileList instanceof Array&&this.fileList.length>0?(a.forEach((function(a){e.push(t.goodList.products[a])})),Object(g["a"])(this.FfileList),e[0].files=this.FfileList,c["a"].loading({message:"查询中...",forbidClick:!0,duration:0}),v["a"].saveHeadquartersDelivery(e).then((function(t){-1===t.code||c["a"].success("收货成功！"),c["a"].clear()})).catch((function(t){c["a"].clear()}))):c["a"].fail("请先上传附件"):c["a"].fail("请先选物料")},afterRead:function(t){var e=this;b["a"].uploapFile(t).then((function(a){if(!0===a.success){var n,i=a.returnObject;t instanceof Array?t.map((function(t,e){t.status="success",t.message="",t.url=Object({NODE_ENV:"production",VUE_APP_API_APPID:"ww44ef3f3c9468b56c",VUE_APP_API_Fapi:"",VUE_APP_API_FURL:"http://mro.ur.com.cn::8384",VUE_APP_API_URL:"http://mro.ur.com.cn:8384",BASE_URL:""}).VUE_APP_API_UPLOAD_FILE+i[e].abbFileName})):(t.status="success",t.message="",t.url=Object({NODE_ENV:"production",VUE_APP_API_APPID:"ww44ef3f3c9468b56c",VUE_APP_API_Fapi:"",VUE_APP_API_FURL:"http://mro.ur.com.cn::8384",VUE_APP_API_URL:"http://mro.ur.com.cn:8384",BASE_URL:""}).VUE_APP_API_UPLOAD_FILE+i[0]),(n=e.FfileList).push.apply(n,_(a.returnObject))}else Object(c["a"])("上传失败")})).catch((function(t){}))},changeCheck:function(t){void 0===this.checkedList[t]?(this.$set(this.checkedList,t,!0),Object.keys(this.checkedList).length==this.goodList.products.length?this.checked=!0:this.checked=!1):(this.$delete(this.checkedList,t),this.checked=!1)},onClickLeft:function(){this.$emit("closeIntervalTimeSelect",{})},changechecked:function(t){var e=this;1==t?this.goodList.products.forEach((function(t,a){e.$set(e.checkedList,a,!0)})):this.checkedList={}}},filters:{}},E=O,I=(a("78f4"),a("2877")),x=Object(I["a"])(E,u,l,!1,null,"10b8696e",null),U=x.exports,j=a("b775"),D={searchHeadquartersDlData:function(t){return j["a"].post("/delivery/searchHeadquartersDlData",t)},saveHeadquartersDelivery:function(t){return j["a"].put("/delivery/saveHeadquartersDelivery",t)}};function w(t){return R(t)||$(t)||T(t)||N()}function N(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(t,e){if(t){if("string"===typeof t)return F(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?F(t,e):void 0}}function $(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function R(t){if(Array.isArray(t))return F(t)}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function V(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var q={components:(S={DeliveryCard:U,Toast:c["a"]},V(S,o["a"].name,o["a"]),V(S,r["a"].name,r["a"]),S),data:function(){return{order:"",goodList:[],CurrPage:1,PageSize:20,loading:!1,finished:!1}},mounted:function(){},methods:{onLoad:function(){0==this.$route.params.shno?(this.CurrPage=this.CurrPage+1,this.getData(this.order,"LIST")):this.getData(this.$route.params.shno,"LIST")},onSearch:function(){this.CurrPage=1,this.getData(this.order,"BUTTON")},getData:function(t,e){var a=this,n=new this.URsearchData;n.addCondition("SH_NO",t||("0"==this.$route.params.shno?"":this.$route.params.shno),"like"),n.addOrderBy("SH_NO desc"),n.setCurrPage(this.CurrPage),n.setPageSize(this.PageSize),"BUTTON"==e&&c["a"].loading({message:"查询中...",forbidClick:!0,duration:0}),D.searchHeadquartersDlData(n.getRequestData()).then((function(t){if(t.data){var n;if("LIST"==e)a.loading=!0,(n=a.goodList).push.apply(n,w(t.data));else"BUTTON"==e&&(a.loading=!0,a.goodList=[],a.goodList=t.data,document.getElementById("d1").scrollTop=0);a.loading=!1;var i=0;a.goodList.forEach((function(t){i=1*i+1*t.products.length})),i>=t.totalRecordNum?a.finished=!0:a.finished=!1,c["a"].clear()}else c["a"].fail("查询失败")}))}}},H=q,z=(a("cf64"),Object(I["a"])(H,i,s,!1,null,"d8d6c61c",null));e["default"]=z.exports},"73a0":function(t,e,a){},"76b7":function(t,e,a){},"78f4":function(t,e,a){"use strict";var n=a("73a0"),i=a.n(n);i.a},cf64:function(t,e,a){"use strict";var n=a("76b7"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-5f7a2c7c.aeda8435.js.map