{"version":3,"sources":["webpack:///./src/views/delivery/delivery.vue?b5fb","webpack:///./src/views/delivery/compoments/deliveryCard.vue?3b6a","webpack:///src/views/delivery/compoments/deliveryCard.vue","webpack:///./src/views/delivery/compoments/deliveryCard.vue?e9e5","webpack:///./src/views/delivery/compoments/deliveryCard.vue","webpack:///./src/views/delivery/api/delivery.js","webpack:///src/views/delivery/delivery.vue","webpack:///./src/views/delivery/delivery.vue?1c3d","webpack:///./src/views/delivery/delivery.vue","webpack:///./src/views/delivery/compoments/deliveryCard.vue?7b4e","webpack:///./src/views/delivery/delivery.vue?e53b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","$route","params","shno","_v","_e","on","onSearch","scopedSlots","_u","key","fn","proxy","model","value","callback","$$v","order","expression","finished","onLoad","loading","_l","item","index","staticRenderFns","_s","goodList","delivery_note","i","staticStyle","checkedList","$event","changeCheck","abbfileName","matCode","matName","poQut","sjShQut","ysOut","Math","round","Number","EPSILON","qcShQut","$set","changechecked","checked","confirmReceipt","afterRead","fileList","name","components","props","type","Object","default","data","show","FfileList","beforeUpdate","computed","created","mounted","methods","Array","length","forEach","FormData","push","files","message","forbidClick","duration","delivery","undefined","$delete","onClickLeft","$emit","val","products","filters","component","searchHeadquartersDlData","service","post","saveHeadquartersDelivery","put","DeliveryCard","Toast","CurrPage","PageSize","getData","restRequest","addCondition","addOrderBy","setCurrPage","setPageSize"],"mappings":"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","file":"js/chunk-5f7a2c7c.aeda8435.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"view\",attrs:{\"id\":\"d1\"}},[(_vm.$route.params.shno !== '0')?_c('div',{staticClass:\"deliverytop\"},[_vm._v(\"\\n    送货单\\n  \")]):_vm._e(),_c('van-sticky',{attrs:{\"offset-top\":\"0\"}},[(_vm.$route.params.shno === '0')?_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入SH单号\"},on:{\"search\":_vm.onSearch},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('div',{on:{\"click\":_vm.onSearch}},[_vm._v(\"搜索\")])]},proxy:true}],null,false,3446203101),model:{value:(_vm.order),callback:function ($$v) {_vm.order=$$v},expression:\"order\"}}):_vm._e()],1),_c('van-list',{attrs:{\"offset\":\"80\",\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.goodList),function(item,index){return _c('DeliveryCard',{key:index,staticClass:\"DeliveryCard\",attrs:{\"goodList\":item}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"comp\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"left\"},[_vm._v(_vm._s(_vm.goodList.delivery_note))])]),_c('div',{staticClass:\"center\"},_vm._l((_vm.goodList.products),function(i,index){return _c('div',{key:index,staticClass:\"gooditem\"},[(_vm.show)?_c('van-checkbox',{staticClass:\"itemCheckbox\",staticStyle:{\"font-size\":\"14px\"},attrs:{\"value\":_vm.checkedList[index],\"icon-size\":\"18px\"},on:{\"click\":function($event){return _vm.changeCheck(index)}}}):_vm._e(),_c('div',{staticClass:\"imgbox\"},[_c('img',{attrs:{\"src\":i.abbfileName,\"alt\":\"\"}})]),_c('div',{staticClass:\"infobox\"},[_c('div',{},[_vm._v(_vm._s(i.matCode))]),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(i.matName))])]),_c('div',{staticClass:\"numbbox\"},[_c('span',{staticClass:\"numb\"},[_vm._v(\"下单：\"+_vm._s(i.poQut))]),_c('span',{staticClass:\"numb\"},[_vm._v(\"送货：\"+_vm._s(i.sjShQut))]),_c('span',{staticClass:\"numb\"},[_vm._v(\"已收：\"+_vm._s(i.ysOut))]),_c('van-stepper',{staticClass:\"stepper\",attrs:{\"decimal-length\":3,\"theme\":\"round\",\"step\":\"0.001\",\"button-size\":\"22\",\"min\":\"0.001\",\"max\":Math.round((i.sjShQut - i.ysOut + Number.EPSILON) * 1000) / 1000,\"disable-plus\":i.qcShQut >=\n             Math.round((i.sjShQut - i.ysOut + Number.EPSILON) * 1000) / 1000},model:{value:(i.qcShQut),callback:function ($$v) {_vm.$set(i, \"qcShQut\", $$v)},expression:\"i.qcShQut\"}})],1)],1)}),0),_c('div',{staticClass:\"footer\"},[_c('van-checkbox',{staticStyle:{\"font-size\":\"14px\"},attrs:{\"icon-size\":\"18px\"},on:{\"click\":function($event){return _vm.changechecked(_vm.checked)}},model:{value:(_vm.checked),callback:function ($$v) {_vm.checked=$$v},expression:\"checked\"}},[_vm._v(\"全选\")]),_c('div',{staticClass:\"btnBox\"},[_c('span',{staticClass:\"btnbox1\",on:{\"click\":_vm.confirmReceipt}},[_vm._v(\"确认收货\")])])],1),_c('van-uploader',{attrs:{\"accept\":\"image/*,.pdf,.xls,.xlsx\",\"multiple\":\"\",\"after-read\":_vm.afterRead},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Description:待收货卡片组件\r\n * @Author: lyj\r\n * @Date: 2020-12-07 17:30\r\n * @LastEditTime : 2020-01-08 22:22:20\r\n -->\r\n\r\n<template>\r\n  <div class=\"comp\">\r\n    \r\n    <div class=\"header\">\r\n      <div class=\"left\">{{ goodList.delivery_note }}</div>\r\n      <!-- <div class=\"right\">卖家已发货</div> -->\r\n    </div>\r\n    <div class=\"center\">\r\n      <div\r\n        class=\"gooditem\"\r\n        v-for=\"(i, index) in goodList.products\"\r\n        :key=\"index\"\r\n      >\r\n        <van-checkbox\r\n          v-if=\"show\"\r\n          class=\"itemCheckbox\"\r\n          :value=\"checkedList[index]\"\r\n          icon-size=\"18px\"\r\n          style=\"font-size: 14px\"\r\n          @click=\"changeCheck(index)\"\r\n        ></van-checkbox>\r\n\r\n        <div class=\"imgbox\">\r\n          <img :src=\"i.abbfileName\" alt=\"\" />\r\n        </div>\r\n        <div class=\"infobox\">\r\n          <div class=\"\">{{ i.matCode }}</div>\r\n          <div class=\"name\">{{ i.matName }}</div>\r\n        </div>\r\n        <div class=\"numbbox\">\r\n          <!-- <span class=\"price\">￥{{i.price}}</span> -->\r\n          <!-- \r\n          <span class=\"numb\">下单：x{{i.qcShQut}}</span>\r\n          <span class=\"numb\">下单：x{{i.qcShQut}}</span>\r\n          <span class=\"numb\">下单：x{{i.qcShQut}}</span> -->\r\n          <span class=\"numb\">下单：{{ i.poQut }}</span>\r\n          <span class=\"numb\">送货：{{ i.sjShQut }}</span>\r\n          <span class=\"numb\">已收：{{ i.ysOut }}</span>\r\n          <van-stepper\r\n            :decimal-length=\"3\"\r\n            class=\"stepper\"\r\n            v-model=\"i.qcShQut\"\r\n            theme=\"round\"\r\n            step=\"0.001\"\r\n            button-size=\"22\"\r\n            min=\"0.001\"\r\n            :max=\"\r\n              Math.round((i.sjShQut - i.ysOut + Number.EPSILON) * 1000) / 1000\r\n            \"\r\n            :disable-plus=\"\r\n              i.qcShQut >=\r\n              Math.round((i.sjShQut - i.ysOut + Number.EPSILON) * 1000) / 1000\r\n            \"\r\n          />\r\n          <!--  -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n <div class=\"footer\">\r\n      <van-checkbox\r\n        v-model=\"checked\"\r\n        icon-size=\"18px\"\r\n        style=\"font-size: 14px\"\r\n        @click=\"changechecked(checked)\"\r\n        >全选</van-checkbox\r\n      >\r\n      <!-- <div class=\"more\"><van-checkbox v-model=\"checked\" checked-color=\"#ee0a24\"></van-checkbox></div> -->\r\n\r\n      <div class=\"btnBox\">\r\n        <!-- <span class=\"btnbox\">加入购物车</span> -->\r\n        <!-- <span class=\"btnbox\">查看物流</span> -->\r\n        <span class=\"btnbox1\" @click=\"confirmReceipt\">确认收货</span>\r\n      </div>\r\n    </div>\r\n    <van-uploader\r\n      accept=\"image/*,.pdf,.xls,.xlsx\"\r\n      v-model=\"fileList\"\r\n      multiple\r\n      :after-read=\"afterRead\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\nimport delivery from \"@/api/delivery/delivery\";\r\nimport files from \"@/api/files/files\";\r\nimport { changetrueTo1 } from \"@/utils/commonJs\";\r\nimport { lockBackgroundScroll } from \"@/utils/backgroundScrollOverly\";\r\n\r\nimport { Toast, NavBar, TreeSelect, Stepper, checkbox, Uploader } from \"vant\";\r\nvar _self;\r\nexport default {\r\n  name: \"intervalTimeSelect\",\r\n  components: {\r\n    [NavBar.name]: NavBar,\r\n    [TreeSelect.name]: TreeSelect,\r\n    [Stepper.name]: Stepper,\r\n    [checkbox.name]: checkbox,\r\n    [Uploader.name]: Uploader,\r\n  },\r\n  props: {\r\n    goodList: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      value: 1,\r\n      checked: false,\r\n      checkedList: {},\r\n      show: true,\r\n      fileList: [],\r\n      FfileList: [],\r\n    };\r\n  },\r\n  beforeUpdate() {},\r\n  computed: {},\r\n  created() {},\r\n  mounted() {},\r\n\r\n  methods: {\r\n\r\n\r\n    // 确认收货\r\n    confirmReceipt() {\r\n      let FormData = [];\r\n\r\n      let checkedList = Object.keys(this.checkedList);\r\n\r\n      if (checkedList instanceof Array && checkedList.length > 0) {  // 判断是否选择物料\r\n      } else {\r\n        Toast.fail(\"请先选物料\");\r\n        return;\r\n      }\r\n\r\n      if (this.fileList instanceof Array && this.fileList.length > 0) {   // 判断是否上次附件\r\n      } else {\r\n        Toast.fail(\"请先上传附件\");\r\n        return;\r\n      }\r\n\r\n      checkedList.forEach((i) => {            // 获取被选中的物料\r\n        FormData.push(this.goodList.products[i]);\r\n      });\r\n\r\n      changetrueTo1(this.FfileList);       // 处理图片的image为true转换为1的\r\n\r\n      FormData[0].files = this.FfileList;     // 处理完后重新赋值给表单数据\r\n\r\n      Toast.loading({\r\n        message: \"查询中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n      });\r\n\r\n      delivery\r\n        .saveHeadquartersDelivery(FormData)\r\n        .then((res) => {\r\n          if (res.code === -1) {\r\n          } else {\r\n            Toast.success(\"收货成功！\");\r\n          }\r\n\r\n          Toast.clear();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n\r\n          Toast.clear();\r\n        });\r\n\r\n      // FormData.files = this.fileList;\r\n\r\n      //  delivery.saveHeadquartersDelivery.post(FormData).then(res=>{\r\n      //    console.log(res)\r\n      //  }).catch(err=>{\r\n      //    console.log(err)\r\n      //  })\r\n\r\n      // Request URL: http://localhost:9093/delivery/saveHeadquartersDelivery\r\n    },\r\n    afterRead(file) {\r\n      files\r\n        .uploapFile(file)\r\n        .then((res) => {\r\n          if (res.success === true) {\r\n            console.log(res.returnObject);\r\n            let urlList = res.returnObject;\r\n\r\n            if (file instanceof Array) {\r\n              //判断是否是数组\r\n              file.map((element, index) => {\r\n                element.status = \"success\";\r\n                element.message = \"\";\r\n                element.url = process.env.VUE_APP_API_UPLOAD_FILE +urlList[index].abbFileName;\r\n              });\r\n            } else {\r\n              file.status = \"success\";\r\n              file.message = \"\";\r\n              file.url = process.env.VUE_APP_API_UPLOAD_FILE + urlList[0];\r\n            }\r\n\r\n            this.FfileList.push(...res.returnObject);\r\n\r\n            console.log(this.fileList, \"uploadFiles---.fileList=\");\r\n\r\n            //  this.$emit('nextevent', this.fileList.map(v=>v.url) ,this.name)\r\n          } else {\r\n            Toast('上传失败')\r\n          }\r\n        })\r\n        .catch((req) => {\r\n          // Toast('上传失败')\r\n        });\r\n\r\n      // 此时可以自行将文件上传至服务器\r\n      // const formData = new FormData();\r\n      //   file.forEach(item=>{\r\n      //       formData.append(\"file\", item.file);\r\n      // })\r\n\r\n      // files.uploapFile(formData).then(res=>{\r\n      //   console.log(res)\r\n      // })\r\n    },\r\n    changeCheck(index) {\r\n      // console.log(index)\r\n      if (this.checkedList[index] === undefined) {\r\n        this.$set(this.checkedList, index, true);\r\n        if (\r\n          Object.keys(this.checkedList).length == this.goodList.products.length\r\n        ) {\r\n          this.checked = true;\r\n        } else {\r\n          this.checked = false;\r\n        }\r\n      } else {\r\n        this.$delete(this.checkedList, index);\r\n        this.checked = false;\r\n      }\r\n\r\n      // this.show=false;\r\n      // this.show=true;\r\n\r\n      // console.log(this.checkedList)\r\n    },\r\n    onClickLeft() {\r\n      console.log(\"333\");\r\n      this.$emit(\"closeIntervalTimeSelect\", {});\r\n    },\r\n    changechecked(val) {\r\n      if (val == true) {\r\n        this.goodList.products.forEach((item, index) => {\r\n          this.$set(this.checkedList, index, true);\r\n        });\r\n      } else {\r\n        this.checkedList = {};\r\n      }\r\n    },\r\n  },\r\n  /**\r\n   * @Description: 过滤器函数\r\n   * @Param:\r\n   * @Author: xwq\r\n   * @LastEditors: xwq\r\n   * @LastEditTime: Do not edit\r\n   * @return:\r\n   * @Date: 2019-10-18 17:21:56\r\n   */\r\n  filters: {},\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.comp {\r\n  max-width: 100%;\r\n  margin: 10px 10px 0px 10px;\r\n  background: white;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  padding: 10px;\r\n  .header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    height: 30px;\r\n    background: white;\r\n\r\n    .left {\r\n      color: #1989fa;\r\n      font-size: 14px;\r\n    }\r\n    .right {\r\n      color: orange;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n\r\n  .center {\r\n    \r\n    max-height: calc(100vh - 226px);;\r\n    overflow: auto;\r\n    .gooditem {\r\n      height: 80px;\r\n      min-width: 100%;\r\n      border-bottom: 3px dashed #f7f8fa;\r\n      display: flex;\r\n      margin: 5px 0;\r\n      border-radius: 5px;\r\n      overflow: hidden;\r\n      position: relative;\r\n      align-items: center;\r\n      /deep/ .van-checkbox__icon {\r\n        height: 17px;\r\n        width: 17px;\r\n        font-size: 12px !important;\r\n      }\r\n      .itemCheckbox {\r\n        position: absolute;\r\n        top: 0;\r\n      }\r\n      .imgbox {\r\n        width: 60px;\r\n        height: 60px;\r\n        background: #f2f3f5;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        img {\r\n          max-height: 100%;\r\n          max-width: 100%;\r\n        }\r\n      }\r\n      .infobox {\r\n        height: 80px;\r\n        flex: 1;\r\n        background: white;\r\n        padding: 0 5px;\r\n        font-size: 12px;\r\n        display: flex;\r\n        flex-direction: column;\r\n\r\n        justify-content: center;\r\n        .name {\r\n          font-size: 12px;\r\n          word-break: break-all;\r\n\r\n          overflow: hidden;\r\n\r\n          text-overflow: ellipsis;\r\n\r\n          display: -webkit-box;\r\n\r\n          -webkit-box-orient: vertical;\r\n\r\n          -webkit-line-clamp: 2;\r\n        }\r\n      }\r\n      .numbbox {\r\n        width: 110px;\r\n        background: white;\r\n        display: flex;\r\n        flex-direction: column;\r\n        text-align: left;\r\n        font-size: 12px;\r\n        position: relative;\r\n        justify-content: center;\r\n        .numb {\r\n          font-size: 12px;\r\n          color: rgb(49, 48, 48);\r\n          text-align: left;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n        .stepper {\r\n          // margin-top: 27px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .footer {\r\n    padding: 5px 0;\r\n    height: 35px;\r\n    width: 100%;\r\n    background: white;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .btnBox {\r\n      flex: 1;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n      span {\r\n        margin-left: 10px;\r\n      }\r\n      .btnbox {\r\n        display: inline-block;\r\n        padding: 0 10px;\r\n        height: 28px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        border: 1px solid #ccc;\r\n        border-radius: 30px;\r\n        font-size: 10px;\r\n      }\r\n\r\n      .btnbox1 {\r\n        display: inline-block;\r\n        padding: 0 15px;\r\n        height: 28px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        border: 1px solid #ff6c6c;\r\n        color: #ff6c6c;\r\n        border-radius: 30px;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n    .more {\r\n      font-size: 12px;\r\n      margin-left: 10px;\r\n      color: rgb(31, 30, 30);\r\n    }\r\n  }\r\n}\r\n\r\n/deep/ .van-stepper--round .van-stepper__plus {\r\n  width: 22px !important;\r\n  height: 22px !important;\r\n}\r\n\r\n/deep/ .van-stepper--round .van-stepper__minus {\r\n  width: 22px !important;\r\n  height: 22px !important;\r\n}\r\n/deep/ .van-stepper__input {\r\n  height: 22px !important;\r\n  width: 60px;\r\n  font-size: 12px;\r\n}\r\n\r\n/deep/ .van-uploader__upload {\r\n  width: 60px;\r\n  height: 60px;\r\n}\r\n\r\n/deep/ .van-uploader__preview-image {\r\n  width: 60px;\r\n  height: 60px;\r\n\r\n  box-shadow: 2px 2px 2px #ccc;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/ .van-uploader__file {\r\n  width: 60px;\r\n  height: 60px;\r\n\r\n  box-shadow: 2px 2px 2px #ccc;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/ .van-uploader__preview {\r\n  margin: 0 7px 7px 0;\r\n}\r\n\r\n/deep/ .van-uploader__upload {\r\n  margin: 0 7px 7px 0;\r\n}\r\n\r\n/deep/ .van-checkbox__label {\r\n  font-size: 12px;\r\n}\r\n\r\n// /deep/ .van-checkbox__icon{\r\n//   height:30px;\r\n//   width:30px;\r\n//   font-size: 12px !important;\r\n// }\r\n\r\n/deep/ .van-checkbox__icon .van-icon {\r\n  font-size: 12px !important;\r\n}\r\n\r\n/deep/ .van-checkbox__icon {\r\n  height: 17px;\r\n  width: 17px;\r\n  font-size: 12px !important;\r\n}\r\n\r\n// /deep/ .footer{\r\n//    .van-checkbox__icon .van-icon{\r\n//      font-size: 12px !important;\r\n//      height:15px;\r\n//    }\r\n// }\r\n\r\n/deep/ .van-stepper__minus,\r\n/deep/ .van-stepper__plus {\r\n  width: 22px !important;\r\n  height: 22px !important;\r\n}\r\n//  text-overflow: -o-ellipsis-lastline;\r\n//   overflow: hidden;\r\n//   text-overflow: ellipsis;\r\n//   display: -webkit-box;\r\n//   -webkit-line-clamp: 2;\r\n//   line-clamp: 2;\r\n//   -webkit-box-orient: vertical;\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deliveryCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deliveryCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./deliveryCard.vue?vue&type=template&id=10b8696e&scoped=true&\"\nimport script from \"./deliveryCard.vue?vue&type=script&lang=js&\"\nexport * from \"./deliveryCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./deliveryCard.vue?vue&type=style&index=0&id=10b8696e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10b8696e\",\n  null\n  \n)\n\nexport default component.exports","import service from '@/utils/request';\r\n// import api from\"@/utils/envChangeApi\"\r\n\r\n\r\nexport default {\r\n\r\n    // 获取待收货的 送货单\r\n    searchHeadquartersDlData(params) {\r\n        return service.post('/delivery/searchHeadquartersDlData', params);\r\n    },\r\n\r\n    \r\n    // 获取待收货的 送货单\r\n    saveHeadquartersDelivery(params) {\r\n        return service.put('/delivery/saveHeadquartersDelivery', params);\r\n    }\r\n};\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"view\" id=\"d1\">\r\n    <div class=\"deliverytop\"  v-if=\"$route.params.shno !== '0'\">\r\n      送货单\r\n    </div>\r\n    <van-sticky offset-top=\"0\">\r\n      <van-search\r\n        v-if=\"$route.params.shno === '0'\"\r\n        v-model=\"order\"\r\n        show-action\r\n        placeholder=\"请输入SH单号\"\r\n        @search=\"onSearch\"\r\n      >\r\n        <template #action>\r\n          <div @click=\"onSearch\">搜索</div>\r\n        </template>\r\n      </van-search>\r\n    </van-sticky>\r\n\r\n    <van-list\r\n      offset=\"80\"\r\n      v-model=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <DeliveryCard\r\n        class=\"DeliveryCard\"\r\n        :goodList=\"item\"\r\n        v-for=\"(item, index) in goodList\"\r\n        :key=\"index\"\r\n      ></DeliveryCard>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DeliveryCard from \"./compoments/deliveryCard\";\r\nimport {getURLtoObj} from \"@/utils//commonJs.js\";\r\n\r\nimport delivery from \"./api/delivery\";\r\nimport { Toast, Sticky, List } from \"vant\";\r\n\r\nexport default {\r\n  components: {\r\n    DeliveryCard,\r\n    Toast,\r\n    [Sticky.name]: Sticky,\r\n    [List.name]: List,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      order: \"\",\r\n      goodList: [],\r\n      CurrPage: 1,\r\n      PageSize: 20,\r\n      loading: false,\r\n      finished: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n     \r\n  },\r\n  methods: {\r\n   \r\n    onLoad() {\r\n      console.log(333333333333333333);\r\n      if (this.$route.params.shno == 0) {\r\n        this.CurrPage = this.CurrPage + 1;\r\n        this.getData(this.order, \"LIST\");\r\n      } else {\r\n        this.getData(this.$route.params.shno, \"LIST\");\r\n      }\r\n\r\n      // 异步更新数据\r\n      // setTimeout 仅做示例，真实场景中一般为 ajax 请求\r\n      // this.CurrPage=this.CurrPage+1;\r\n      //  await\r\n\r\n      // this.loading = false;\r\n\r\n      // setTimeout(() => {\r\n      //   for (let i = 0; i < 10; i++) {\r\n      //     this.list.push(this.list.length + 1);\r\n      //   }\r\n\r\n      //   // 加载状态结束\r\n\r\n      //   // 数据全部加载完成\r\n      //   if (this.list.length >= 40) {\r\n      //     this.finished = true;\r\n      //   }\r\n      // }, 1000);\r\n    },\r\n    onSearch() {\r\n      this.CurrPage = 1;\r\n      this.getData(this.order, \"BUTTON\");\r\n    },\r\n    getData(order, type) {\r\n      let restRequest = new this.URsearchData();\r\n      restRequest.addCondition(\r\n        \"SH_NO\",\r\n        order\r\n          ? order\r\n          : this.$route.params.shno == \"0\"\r\n          ? \"\"\r\n          : this.$route.params.shno,\r\n        \"like\"\r\n      );\r\n      // restRequest.addCondition(\"DB_NO\", this.queryCondition.dbNo, \"like\");\r\n      restRequest.addOrderBy(\"SH_NO desc\");\r\n      // restRequest.setCurrPage(this.queryResult.currPage);\r\n      // restRequest.setPageSize(this.queryResult.pageSize);\r\n      restRequest.setCurrPage(this.CurrPage);\r\n      restRequest.setPageSize(this.PageSize);\r\n\r\n      if (type == \"BUTTON\") {\r\n        Toast.loading({\r\n          message: \"查询中...\",\r\n          forbidClick: true,\r\n          duration: 0,\r\n        });\r\n      }\r\n      delivery\r\n        .searchHeadquartersDlData(restRequest.getRequestData())\r\n        .then((res) => {\r\n          if (res.data) {\r\n            console.log(\"type\");\r\n\r\n            console.log(type);\r\n            if (type == \"LIST\") {\r\n              this.loading = true;\r\n              this.goodList.push(...res.data);\r\n            } else if (type == \"BUTTON\") {\r\n              this.loading = true;\r\n              this.goodList = [];\r\n              this.goodList = res.data;\r\n              document.getElementById(\"d1\").scrollTop = 0; //通过scrollTop设置滚动到100位置\r\n            }\r\n\r\n            // 加载状态结束\r\n            this.loading = false;\r\n\r\n            let count = 0;\r\n            this.goodList.forEach((element) => {\r\n              count = count * 1 + element.products.length * 1;\r\n            });\r\n\r\n            if (count >= res.totalRecordNum) {\r\n              console.log(\"this.finished\");\r\n              this.finished = true;\r\n            } else {\r\n              this.finished = false;\r\n            }\r\n\r\n            Toast.clear();\r\n          } else {\r\n            Toast.fail(\"查询失败\");\r\n          }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.view {\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  overflow: auto;\r\n  height: 100%;\r\n}\r\n/deep/ .van-list__placeholder{\r\n    height: 10px;\r\n}\r\n/deep/ .deliverytop{\r\n  height:55px;\r\n  width: 100%;\r\n  font-size: 16px;\r\n  line-height: 55px;\r\n  text-align: center;\r\n  color:#323233;\r\n  background: white;\r\n}\r\n\r\n// /deep/ .DeliveryCard{\r\n//   max-height: calc(100vh - 73px);;\r\n//   display: flex;\r\n//   flex-direction: column;\r\n// }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delivery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delivery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./delivery.vue?vue&type=template&id=d8d6c61c&scoped=true&\"\nimport script from \"./delivery.vue?vue&type=script&lang=js&\"\nexport * from \"./delivery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./delivery.vue?vue&type=style&index=0&id=d8d6c61c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d8d6c61c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deliveryCard.vue?vue&type=style&index=0&id=10b8696e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deliveryCard.vue?vue&type=style&index=0&id=10b8696e&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delivery.vue?vue&type=style&index=0&id=d8d6c61c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delivery.vue?vue&type=style&index=0&id=d8d6c61c&lang=less&scoped=true&\""],"sourceRoot":""}